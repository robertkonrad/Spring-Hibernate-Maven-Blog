<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" 
 	layout:decorate="~{layouts/main-layout}">
<head>
	<title>List of posts</title>
</head>
<body>
	<div layout:fragment="content">
	 	<h1>List of posts</h1>
		<a sec:authorize="isAuthenticated()" class="btn btn-primary" th:href="@{/post/form}">Create new post</a>
		<table>
			<thead>
				<tr>
					<th>Title</th>
					<th>Description</th>
					<th>Author</th>
					<th sec:authorize="isAuthenticated()">Actions</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="tempPost : ${posts}">
					<td th:text="${tempPost.title}"></td>
					<td th:text="${tempPost.description}"></td>
					<td th:text="${tempPost.author.username}"></td>
					<td sec:authorize="isAuthenticated()">
						<a th:href="@{'/post/delete/' + ${tempPost.id}}" 
						onclick="if (!(confirm('Are you sure you want to delete this post?'))) return false">Delete</a>
						|<a th:href="@{'/post/update/' + ${tempPost.id}}">Update</a>
					</td>
				</tr>
			</tbody>
		</table>
		 
		<ul>
			<th:block th:each="i: ${#numbers.sequence(1, pages)}">
				<a th:href="@{'/page/' + ${i}}" th:text="${i}"></a>
			</th:block>
		</ul>
	</div>
</body>
</html>
